define(['_'], function (_) {
  var x75p = function (notes) {
    return _.map(notes, function (note) {
      return _.isArray(note) ? [note[0], note[1] * 0.75] : [note, 0.75]
    })
  }
  var prelude = [
    // [10, 2/3], [9, 2/3], [10, 2/3], 7, 7, 7, 7,
    // 8, 8, 9, 9, 10, 10, 10, 10,
    // 15, 15, [19, 2/3], [19, 2/3], [19, 2/3], 17, 17, 19, 19, 20, 20, 14, 14, 17, 17, 17, 17,
    // 15, 15,

    // [10, 2/3], [9, 2/3], [10, 2/3], 7, 7, 7, 7,
    // 8, 8, 9, 9, 10, 10, 10, 10,
    // 15, 15, [19, 2/3], [19, 2/3], [19, 2/3], 17, 17, 19, 19, 20, 20, 14, 14, 17, 17, 17, 17,
    // 15, 15,

    // [19, 2/3], [19, 2/3], [19, 2/3], 19, 19, 19, 19,
    // 14, 14, 14, 17, 17, 17, null,
    // [15, 1/2], [14, 1/2], 15, 15,
    // [20, 2/3], [20, 2/3], [20, 2/3], 20, 20, 20, 20,
    // 15, 15, 15, 17, 19, 19, 19, 19, 17, 17,

    // [10, 2/3], [9, 2/3], [10, 2/3], 7, 7, 7, 7,
    // 8, 8, 9, 9, 10, 10, 10, 10,
    // 15, 15, [19, 2/3], [19, 2/3], [19, 2/3], 17, 17, 19, 19, 20, 20, 14, 14, 17, 17, 17, 17,
    // 15, 15,
  ]

  var overtune = x75p([
    [-2, 2], 10, [8, 2], 5, 2, 0, -2, null, -2, [null, 7],

    7, 8, 7, 5, 3, 2, [5, 2], 5, [0, 2], [null, 5],
    2, 3, 2, 0, -2, -4, [-5, 2], -5, [-2,2], [null, 5],

    7, 8, 7, 5, 3, 2, [5, 2], 5, [0, 2], [null, 5],
    2, 3, 2, 0, -2, -4, [-5, 2], -5, [-2,2], [null, 5],

    -4, -2, -1, 3, 1, -1, [-2, 2], [null, 1], [-5, 2], [null, 5],
    -4, -2, -1, 3, 1, -1, [-2, 2], [null, 1], [-5, 2], [null, 5],

    -4, -2, -1, 3, 1, -1, [-2, 2], [null, 1], [3, 2], [null, 5],
    0, -1, 0, 2, 3, 0, [5, 2], [null, 8]
  ])

  var verse = []

  var chorus = []

  var notes = prelude
    .concat(overtune)
    .concat(verse)
    .concat(chorus)

  return {
    name: 'square2',
    waveform: 'square?d=0.25',
    config: {
      instrument: {
        sampleRate: 44100,
        bpm: 233,
        fadeOut: {
          from: 0,
          to: 1.2
        }
      },
      audio: {
        volume: 0.2,
      }
    },
    notes: notes
  }
})
