var demonotes1 = [
  // 1
  [null, 8],

  -3, 0, -3, 2, [-5, .5], -3, [-5, .5], -3, 4, [-3, .5], -3, [-3, .5], -3, -1, 0, -1, -3, null,
  -1, -3, 2, -1, [-3, .5], -1, [-3, .5], -1, 4, [-1, .5], -1, [-1, .5], -1, 0, 2, 0, -1, null,

  -3, 0, -3, 2, [-5, .5], -3, [-5, .5], -3, 4, [-3, .5], -3, [-3, .5], -3, -1, 0, -1, -3, null,
  -1, -3, 2, -1, [-3, .5], -1, [-3, .5], -1, 4, [-1, .5], -1, [-1, .5], -1, 0, 2, 0, -1, null,

  // 2
  -3, null, -5, null, -7, null, -8, null, null, -8, -8, -8, -8, -8,

  -3, -1, 0, -1, 0, -3, null,
  4, 2, 0, 2, 0, 2, -3, null,
  0, -1, -3, -5, -3, -1, 7, null,
  5, 4, 2, 4,
  [null, 4],

  -8, -3, -1, 0, -1, 0, -3, null,
  4, 2, 0, 2, 0, 2, -3, null,
  0, -1, -3, -5, -3, -1, 7, null,
  5, 4, 2, 4,
  [null, 4],

  // 3
  [-8, .5], [-5, .5], [-3, .5], [-1, .5], [0, .5], [2, .5],

  0, [-1, .5], 0, [-3, .5], 0, [-1, .5], 0, [-3, .5], [2, .5], [0, .5], [-1, .5], [0, .5],
  0, [-1, .5], 0, [-3, .5], 0, [-1, .5], 0, [-3, .5], [2, .5], [0, .5], [-1, .5], [-3, .5],
  2, [0, .5], 2, [-1, .5], 2, [0, .5], 2, [-1, .5], [4, .5], [2, .5], [0, .5], [-1, .5], [-3, .5], [-5, .5], [-8, .5], [-7, .5],
  [-3, .5], [-8, .5], [-5, .5], [-3, .5], [0, .5], [-1, .5], [-3, .5], [-5, .5], 4, 2,

  0, [-1, .5], 0, [-3, .5], 0, [-1, .5], 0, [-3, .5], [2, .5], [0, .5], [-1, .5], [0, .5],
  0, [-1, .5], 0, [-3, .5], 0, [-1, .5], 0, [-3, .5], [2, .5], [0, .5], [-1, .5], [-3, .5],
  2, [0, .5], 2, [-1, .5], 2, [0, .5], 2, [-1, .5], [4, .5], [2, .5], [0, .5], [-1, .5], [-3, .5], [-5, .5], [-8, .5], [-7, .5],
  [-3, .5], [-8, .5], [-5, .5], [-3, .5], [0, .5], [-1, .5], [-3, .5], [-5, .5], 4, 2
]

var demonotes2 = [
  // 1
  null, -8, null, -8, null, -8, null, -8,

  -8, [-3, .5], [-8, .5], [-3, .5], [-8, .5], -3,
  [null, .5], [-3, .5], -8, -3, -8,
  -12, [-7, .5], [-12, .5], [-7, .5], [-12, .5], -7,
  [null, .5], [-7, .5], -12, -7, -12,
  -10, [-5, .5], [-10, .5], [-5, .5], [-10, .5], -5,
  [null, .5], [-5, .5], -10, -5, -10,
  -13, [-8, .5], [-13, .5], [-8, .5], [-13, .5], -8,
  -5, -7, -8, [-8, .5], [-8, .5],

  -8, [-3, .5], [-8, .5], [-3, .5], [-8, .5], -3,
  [null, .5], [-3, .5], -8, -3, -8,
  -12, [-7, .5], [-12, .5], [-7, .5], [-12, .5], -7,
  [null, .5], [-7, .5], -12, -7, -12,
  -10, [-5, .5], [-10, .5], [-5, .5], [-10, .5], -5,
  [null, .5], [-5, .5], -10, -5, -10,
  -13, [-8, .5], [-13, .5], [-8, .5], [-13, .5], -8,
  -5, -7, -8, [-8, .5], [-8, .5],

  // 2
  -12, [-3, .5], [-3, .5],
  -12, [-5, .5], [-5, .5],
  -12, [-7, .5], [-7, .5],
  -12, [-8, .5], [-8, .5],
  -8, -8, -8, -8,
  -8, -8, -8, -8,

  -8, [-3, .5], [-8, .5], [-3, .5], [-8, .5], -3,
  [null, .5], [-3, .5], -8, -3, -8,
  -12, [-7, .5], [-12, .5], [-7, .5], [-12, .5], -7,
  [null, .5], [-7, .5], -12, -7, -12,
  -10, [-5, .5], [-10, .5], [-5, .5], [-10, .5], -5,
  [null, .5], [-5, .5], -10, -5, -10,
  -13, [-8, .5], [-13, .5], [-8, .5], [-13, .5], -8,
  -5, -7, -8, null,

  -8, [-3, .5], [-8, .5], [-3, .5], [-8, .5], -3,
  [null, .5], [-3, .5], -8, -3, -8,
  -12, [-7, .5], [-12, .5], [-7, .5], [-12, .5], -7,
  [null, .5], [-7, .5],-12,-7,-12,
  -10, [-5, .5], [-10, .5], [-5, .5], [-10, .5], -5,
  [null, .5], [-5, .5], -10, -5, -10,
  -13, [-8, .5], [-13, .5], [-8, .5], [-13, .5], -8,
  -5, -7, -8, null,

  // 3
  -8, [-3, .5], [-8, .5], [-3, .5], [-8, .5], -3,
  [null, .5], [-3, .5], -8, -3, -8,
  null, [-3, .5], [-7, .5], [-3, .5], [-7, .5], -3,
  [null, .5], [-3, .5], -7, -3, -7,
  null, [-3, .5], [-5, 1.5], [-5, .5], [-3, .5],
  [-5, .5], -3, [-5, .5], -3, -5,
  null, [-8, .5], [-7, 1.5], [-5, .5], [-3, .5],
  -3, -3, -3, null,

  -8, [-3, .5], [-8, .5], [-3, .5], [-8, .5], -3,
  [null, .5], [-3, .5], -8, -3, -8,
  null, [-3, .5], [-7, .5], [-3, .5], [-7, .5], -3,
  [null, .5], [-3, .5], -7, -3, -7,
  null, [-3, .5], [-5,1.5], [-5, .5], [-3, .5],
  [-5, .5], -3, [-5, .5], -3, -5,
  null, [-8, .5], [-7,1.5], [-5, .5], [-3, .5],
  -3, -3, -3, null,
]
// 3 -8
// 4 -7
// 5 -5
// 6 -3
// 7 -1
// 1 0
// 2 2
// 3 4
// 4 5
var demonotes3 = _.flatten(_.map(_.times(108), _.constant([
  [0, .2], [null, 1.8]
])))

var bpm = 280

_.map([
  Instrument('sawtooth')
  .set('sampleRate', 44100)
  .set('volume', .3)
  .set('bpm', bpm)
  // .enable('loop')
  .perform(demonotes1),

  Instrument('pulse')
  .set('sampleRate', 44100)
  .set('volume', .2)
  .set('bpm', bpm)
  // .enable('loop')
  .perform(demonotes2),

  Instrument('noise')
  .set('sampleRate', 44100)
  .set('volume', .1)
  .set('bpm', bpm)
  // .enable('loop')
  .perform(demonotes3)
], instrument => {
  var audio = instrument.audio
  audio.style.display = 'block'
  document.body.appendChild(instrument.audio)
  audio.play()
})
